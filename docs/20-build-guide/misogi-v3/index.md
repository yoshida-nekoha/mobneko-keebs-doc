---
title: 禊 v3 ビルドガイド
authors: [nekoha]
date: 2024-07-23
# image: ./misogi-QR.png
---

## v3 の特徴

禊シリーズ`v3`版です。

- 禊シリーズ初、LED で光る
- ベゼルを狭くし、さらにコンパクトに
- 電源 ON/OFF はトグルスイッチ
- 電池は見せるスタイル

## このビルドガイドについて

BMP を使った無線版で説明しています。  
電源パーツがない以外、ProMicro 版も組み立て方は一緒です。

## パーツリスト

### キットに付属するもの

- 基盤
- スイッチプレート
- ボトムプレート
- トップケース
- ネジ M2x8mm 11 本
- ゴム足 3 個
- 昇圧回路
- トグル式電源スイッチ
- 単 4 電池ボックス

PCB 基盤  
![基盤](./img/misogi-v3-01.jpg)

ケース一式  
![ケース](./img/misogi-v3-00.jpg)

その他電源周り＆ネジ  
![電源キット、ネジ](./img/misogi-v3-02.jpg)

### 別売り(ご自分で用意してください)

- MX 互換 PCB ソケット 34 個
- MX 互換キースイッチ 34 個
- MX 互換キーキャップ 1u 34 個
- マイコンボード: `BLE Micro Pro`(下記参照)
- 12pin か 13pin のコンスルー、またはピンヘッダ

これらはキットに付属しないので、ご自分で用意してください。  
![ソケット、マイコン](./img/misogi-v3-03.jpg)

## パーツの参考購入先

### ご自分で用意するもの(キットに含まれないもの)

- BLE Micro Pro(どちらで購入しても OK)
  - [BLE Micro Pro Type-C 版: 遊舎工房](https://shop.yushakobo.jp/products/ble-micro-pro?variant=37665571340449)
  - [Pro Micro サイズの USB 対応 nRF52 マイコンボード: のぎけす屋](https://booth.pm/ja/items/1177319)
- コンスルーピン x2
  - 12 or 13 ピンで 2.5mm 高が適合します
  - [コンスルー: 遊舎工房](https://shop.yushakobo.jp/products/31?variant=37665714405537)
  - [MAC8 コンスルー XB-3-2.5-12P \(高さ 2.5mm/12 ピン/1 個\): TALP KEYBOARD](https://talpkeyboard.net/items/5e056626d790db16e2889233)
- MX 互換 PCB ソケット x34
  - [Kailh Switch Socket: 遊舎工房](https://shop.yushakobo.jp/products/a01ps?_pos=1&_sid=782ff49e7&_ss=r)
    - MX 用を選択してください
  - [MX スイッチ用 Kailh PCB ソケット (10 個セット): TALP KEYBOARD](https://talpkeyboard.net/items/5e02c5405b120c792616bcf9)

### キットに含まれるもの

キットに付属していますので通常は不要です。スペアが必要なら。

- [XCL103 使用 3.3V 出力昇圧 DCDC コンバーターキット: 秋月電子](https://akizukidenshi.com/catalog/g/g116116/)
- [電池ボックス 単 4×1 本 ピン: 秋月電子](https://akizukidenshi.com/catalog/g/g102670/)
- [基板用小型 3P トグルスイッチ 1 回路 2 接点: 秋月電子](https://akizukidenshi.com/catalog/g/g112407/)
<!-- - [3.3V 出力昇圧 DCDC コンバーター: 秋月電子](https://akizukidenshi.com/catalog/g/g113066/) -->

## マイコンの用意

BMP を組み付け、ファームウェアを書き込みます。  
`Vial` に対応しています。

1. [ブートローダーをアップデートする](https://sekigon-gonnoc.github.io/BLE-Micro-Pro-WebConfigurator/#/update/bootloader)
   1. バージョン `ble_micro_pro_bootloader_1_2_2` を選び、BMP を USB 接続して `Update` をクリック
   2. 接続、書き込みが終わったら次に進むようメッセージが表示されます
   3. 1 回目は接続だけで終わってしまうことがあるので、表示メッセージを確認してください
2. [アプリケーションをアップデートする](https://sekigon-gonnoc.github.io/BLE-Micro-Pro-WebConfigurator/#/update/application)
   1. バージョン `ble_micro_pro_vial_1_2_3` を選び、BMP を USB 接続して `Update` をクリック
   2. 接続、書き込みが終わったら次に進むようメッセージが表示されます
   3. 1 回目は接続だけで終わってしまうことがあるので、表示メッセージを確認してください
3. [BMP 版ファームウェアをダウンロード](/firmwares/禊v3/bmp-misogi-v3.zip)して解凍
4. マイコンボードを USB 接続すると、ドライブとして認識されます
   1. 解凍したファイルを上書きコピーしてください
5. コピーが終わったら[Vial Web](https://vial.rocks/)からキーマップをリアルタイムに編集できます！
   1. 繋がらない場合はいったんケーブルを抜いて再接続してみてください(初回はちょっと不安定)

配布バージョンのキーマップは私が普段から愛用しているものですが、ちょっとクセがあるかもしれません。  
ご自身で最適なキーマップを探求してください！

→ [クセありなキーマップの紹介はこちら](/blog/2024/07/13/keymaps)

## 組み立て

### ソケットの取り付け

スイッチソケットを取り付けます。  
別途 MX 互換のソケット(34 個)を用意し、ハンダ付けしてください。

片方のランドに予備ハンダを盛り付けてから、ソケットをはんだ付けしていきます。  
![予備ハンダ](./img/misogi-v3-04.jpg)

ハンダが不十分だとスイッチ不良になるのでしっかり付けてください。  
![スイッチのはんだ付け](./img/misogi-v3-05.jpg)

### 電池ボックスの取り付け

※ ProMicro 版は [マイコンボードの取り付け](#マイコンボードの取り付け) までスキップしてください。

電池ボックスは、左側が `+` になるように設置してください。

電池ボックスの端子を PCB に通したら、マスキングテープなどで固定してください。  
![電池ボックスを固定](./img/misogi-v3-06.jpg)

端子はほんのちょっとあれば PCB とくっつくので、ギリギリ残して切ってください。  
具体的にはボトムプレートの隙間が 1.8mm と、周り 5mm 四方までしか許容しないので、そこに収まるように切ります。  
(※梱包サイズに収めやすいので、2 次出荷分からカット済みです)  
![端子を切り取る](./img/misogi-v3-07.jpg)

切り取ったらはんだ付け。  
![電池ボックスのはんだ付け](./img/misogi-v3-08.jpg)

### 昇圧コンバータの取り付け

まずは付属のピンヘッダを 3 ピンずつに分けます。  
部品として使うのは１個、１個はまっすぐ取り付けるための台です。  
![ピンヘッダの用意](./img/misogi-v3-09.jpg)

基盤の `I`, `G`, `O` のマークとコンバータの `I`, `G`, `O` マークを合わせるように載せてください。  
(部品調達の都合で２つの種類があり、写真とは異なる配置となる場合があります)  
ピンヘッダの短い方を PCB 側にすると、ちょうどよく裏側からちょっぴり出るくらいになります。  
![コンバータを載せる](./img/misogi-v3-10.jpg)

マスキングテープなどで仮止めします。この時点ではコンバータが動きますが気にしないでください。  
![テープで固定](./img/misogi-v3-11.jpg)

裏側からはんだ付けします。  
![コンバータの裏側](./img/misogi-v3-12.jpg)

ほとんど端子が出ていませんが、ハンダを流し込むようにして固定できれば OK です。  
![コンバータのはんだ付け](./img/misogi-v3-13.jpg)

表面に戻してマスキングテープを取り、コンバータをはんだ付けしてください。  
写真のように、`I`, `G`, `O`側のみで OK です。  
あまったピンはカットしてください(写真はカットしてからはんだ付けしました)。  
![コンバータのはんだ付け](./img/misogi-v3-14.jpg)

`I`, `G`, `O`ではない反対側の端子 3 つは未使用で、どこにもつながっていません。

ぐらつかないようにもはんだ付けしても大丈夫ですが、端子同士のショートはさせないでください。

### 電源スイッチの取り付け

電源スイッチを組み付けます。
スイッチのリング外周には継ぎ目があります。継ぎ目を奥にする方が見た目が良くなります。  
![電源スイッチを載せる](./img/misogi-v3-15.jpg)

裏側から５ピン全部はんだ付けします。  
![電源スイッチをはんだ付け](./img/misogi-v3-18.jpg)

### マイコンボードの取り付け

コンスルーピンをマイコンに組み付けます。  
コンスルーのサイドにある小窓をマイコン側にしてください。  
![小窓をマイコン側に](./img/misogi-v3-19.jpg)

**マイコンボードは背面(電子パーツが少ない方)が上になります(写真参照)。**  
コンスルーまたはピンヘッダは高さ `2.5mm` のタイプを選んでください。  
![マイコンの装着](./img/misogi-v3-20.jpg)

このままでも動きますが、抜き差しするときにピンが曲がりやすいのでマイコン側ははんだ付けをおすすめします。  
![マイコンのはんだ付け](./img/misogi-v3-21.jpg)

USB 端子反対側の 9 番と 35 番は使っていないので、 ProMicro 用の 12 ピンコンスルーでも動作します。

### スイッチプレート、スイッチの取り付け

基盤の上にスイッチプレートを乗せます。  
スイッチプレート最下段の右側に切り欠きが来るようにセットしてください。

![スイッチプレートの向きに注意](./img/misogi-v3-22.jpg)

スイッチをはめ込んでいきます。  
スイッチの足をまっすぐにして、ゆっくり差し込んでください。  
USB ケーブル経由で `vial` に接続し、テスターモードですべてのキーが反応することを確認して下さい。  
動作しないスイッチはハンダ不足と思われるので、追いハンダで盛ってください(これ撮ったときも 1/3 くらい動作しなくて追いハンダしました)。
![スイッチ動作確認](./img/misogi-v3-23.jpg)

### トップケースの取り付け

トップケースを被せます。  
向かって左、マイコン側から被せていきます。
![](./img/misogi-v3-24.jpg)

### ボトムプレートの取り付け

裏返してボトムプレートを載せます。  
マイコンと電池ボックスに合うように置いてください。  
上下を間違えるとネジ穴が合わないのですぐわかると思います。  
載せたら付属のネジを締め込んでください。  
![ネジ締め](./img/misogi-v3-25.jpg)

- ボトムプレートに PCB 基盤を載せます
- その上からトップケースをかぶせます
- 外周部の 6 箇所を付属の M2 ネジで締めます
- 製品版にはボトム中央の穴はありません

### ゴム足の貼付け

3D プリンタケースは微妙に反りやすく、底面がまっすぐになっていないです。  
厚いデスクマットの上ならそのまま使えますが、硬い机の上で使うならゴム足があったほうが良いです。

- キーボードの奥側、コーナーのソケット下に 2 点
- キーボードの手前側、中央に 1 点

の 3 点に貼り付けることで安定します(キット内付属のゴム足も 3 点のみ同梱です)。  
4 点以上つけてしまうと反りのせいで逆に安定しません。

## 完成

以上で完成となります、お疲れ様でした！
![完成！](./img/misogi-v3-26.jpg)

[#misogi34](https://x.com/search?q=%23misogi34) のハッシュタグをつけて投稿してもらえると励みになります！

禊シリーズはそこそこ売れるのですが、使い続けている！という投稿は見たことないです。。。  
最初は慣れるまで苦しいですが、ぜひ使いこなしてください！  
ご意見、ご要望もお待ちしています！

## 付録

- [禊 v3 用ファームウェア](/firmwares/禊v3/bmp-misogi-v3.zip)
- [3D プリント用 STL ファイル](/firmwares/禊v3/stl-misogi-v3.1.zip)

## 履歴

- 2024-10-18 販売開始
